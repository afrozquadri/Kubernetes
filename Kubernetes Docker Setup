#install the GPG key in the servers
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

sudo add-apt-repository \
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable"
#Run Apt-get to make sure we haev installed the staged packages
sudo apt-get update
# install the docker with approperiate version 
sudo apt-get install -y docker-ce=18.06.1~ce~3-0~ubuntu
#hold the new version to be installed becasue of kubeadmin (it doesnt support on new version of of docker file)
sudo apt-mark hold docker-ce
# Check the docker installed on server
sudo docker version

# Same we have to for Kubernetes as well

#Install the GPG Key as we did for docker
curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
#below is the packages for Kubernetes
cat << EOF | sudo tee /etc/apt/sources.list.d/kubernetes.list
deb https://apt.kubernetes.io/ kubernetes-xenial main
EOF
#RUN the update every time once stage the pakages 
sudo apt-get update
#Run the below kuberenetes components 
sudo apt-get install -y kubelet=1.12.7-00 kubeadm=1.12.7-00 kubectl=1.12.7-00
# RUN the beklow command to hold the new version to be isntalled
sudo apt-mark hold kubelet kubeadm kubectl
